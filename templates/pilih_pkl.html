{% extends "base.html" %}
{% block content %}
{% if session.get('role') == 'siswa' %}
  {% include "navbar/navbar_login.html" %}
{% else %}
  {% include "navbar/navbar.html" %}
{% endif %}
{% include "modal/modal_filter.html" %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pilih_pkl.css') }}">

<div class="card-search">
  <div class="container">
    <br>
    <div class="card-search-2">
      <form class="d-flex" role="search">
        <div class="input-group me-2">
          <input type="search" class="form-control" placeholder="Cari tempat..." aria-label="Search">
          <button class="btn btn-search" type="button"><i class="bi bi-search"></i></button>
        </div>
        <div class="dropdown-center">
          <button class="btn btn-filter" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            <i class="bi bi-filter"></i> Filter
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="container mt-5">
    {% if data_tempat_pkl|length == 0 %}
      <div class="alert alert-warning text-center" role="alert">
        <strong>Tidak ada tempat PKL yang sesuai dengan kriteria pencarian</strong>
      </div>
    {% else %}
      <div class="row">
        {% for tempat in data_tempat_pkl %}
        <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3">
          <div class="card h-100">
            <img src="{{ url_for('static', filename='img/' ~ tempat.foto) }}" class="card-img-top" alt="Foto Tempat">
            <div class="card-body">
              <h5 class="card-title">{{ tempat.nama_tempat }}</h5>
              <p class="card-text mb-0">Institusi: {{ tempat.institusi }}</p>
              <p class="card-text mb-0">Bidang: {{ tempat.bidang_pekerjaan }}</p>
              <p class="card-text mb-0">Kuota: {{ tempat.kuota }}</p>
              
              {% if tempat.score is defined %}
              <div class="mt-3">
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold">Skor Hybrid:</span>
                  <span class="badge bg-primary">{{ tempat.score }}</span>
                </div>
                
                {% if tempat.rekomendasi is defined %}
                <div class="d-flex justify-content-between mt-2">
                  <span class="fw-bold">Rekomendasi:</span>
                  {% if tempat.rekomendasi == 'Sangat Rekomendasi' %}
                    <span class="badge bg-success">{{ tempat.rekomendasi }}</span>
                  {% elif tempat.rekomendasi == 'Kurang Rekomendasi' %}
                    <span class="badge bg-warning text-dark">{{ tempat.rekomendasi }}</span>
                  {% else %}
                    <span class="badge bg-danger">{{ tempat.rekomendasi }}</span>
                  {% endif %}
                </div>
                {% endif %}
              </div>
              {% endif %}
              
              <div class="mt-3">
                <a href="{{ url_for('tempat_pkl_siswa_routes.detail_tempat_pkl', id=tempat.id) }}" class="btn btn-lihat-detail w-100">Lihat Detail</a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
  
{% include "footer/footer.html" %}
{% endblock %}
